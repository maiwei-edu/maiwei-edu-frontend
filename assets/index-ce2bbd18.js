import{u as C,s as e,cu as a,p as i,y as P,x as w,S as n,z as b}from"./index-bc9ff81c.js";import{l as $,h as H}from"./book-5040e675.js";import{E as S}from"./index-5aae9b85.js";import{T as B}from"./index-c98cdc2b.js";import{F as V}from"./index-bd4868b8.js";import{P as I}from"./Pagination-0364851f.js";import"./useForceUpdate-4c0917fe.js";const K=({cid:l,name:o,thumb:h,charge:r,viewTimes:u,isVipFree:c,shortDesc:g,userCount:_,publishedAt:p})=>{const d=C(),j=()=>{d("/book/detail/"+l)};return e.jsxs("div",{className:a["book-item-comp"],onClick:()=>j(),children:[e.jsx("div",{className:a["book-thumb"],children:e.jsx("div",{className:a["thumb-bar"],children:e.jsx(B,{value:h,width:120,height:160,border:null})})}),e.jsxs("div",{className:a["book-body"],children:[e.jsx("div",{className:a["book-info"],children:e.jsx("div",{className:a["book-name"],children:o})}),e.jsx("div",{className:a["book-desc"],children:g}),e.jsxs("div",{className:a["book-charge"],children:[r!==0&&e.jsxs("div",{className:a["charge-text"],children:[e.jsx("span",{className:a.unit,children:"￥"}),r]}),r===0&&e.jsx("div",{className:a["free-text"],children:"免费"})]})]})]})},U="_contanier_1jg6f_1",q="_tit_1jg6f_40",G="_unit_1jg6f_122",s={contanier:U,"left-contanier":"_left-contanier_1jg6f_10","book-item":"_book-item_1jg6f_18","right-contanier":"_right-contanier_1jg6f_24","right-list":"_right-list_1jg6f_28",tit:q,"right-box":"_right-box_1jg6f_50","book-item-comp":"_book-item-comp_1jg6f_62","book-thumb":"_book-thumb_1jg6f_72","thumb-bar":"_thumb-bar_1jg6f_72","book-body":"_book-body_1jg6f_75","book-title":"_book-title_1jg6f_80","book-info":"_book-info_1jg6f_94","read-count":"_read-count_1jg6f_102","book-charge":"_book-charge_1jg6f_110","charge-text":"_charge-text_1jg6f_119",unit:G,"free-text":"_free-text_1jg6f_125"},ee=()=>{document.title="电子书";const l=C(),[o,h]=i.useState(!1),[r,u]=i.useState(!1),[c,g]=i.useState([]),[_,p]=i.useState([]),[d,j]=i.useState([]),[v,L]=i.useState(!1),[f,k]=i.useState(1),[x,J]=i.useState(10),[y,T]=i.useState(0),D=new URLSearchParams(P().search),[N,R]=i.useState(Number(D.get("category_id"))||0);i.useEffect(()=>{z()},[v,f,x]),i.useEffect(()=>{A()},[]);const E=()=>{k(1),g([]),L(!v)},z=()=>{o||(h(!0),$({page:f,size:x,scene:"default",cid:N}).then(t=>{g(t.data.data.data),T(t.data.data.total),p(t.data.categories),h(!1)}))},A=()=>{r||(u(!0),H().then(t=>{j(t.data),u(!1)}))},F=t=>{l("/book/detail/"+t)};return e.jsxs(e.Fragment,{children:[e.jsx(V,{loading:o,categories:_,defaultKey:N,defaultChild:0,onSelected:(t,m)=>{R(t),l(t===0?"/book":"/book?category_id="+t),E()}}),e.jsxs("div",{className:s.contanier,children:[e.jsxs("div",{className:s["left-contanier"],children:[o&&e.jsx(w,{children:e.jsx("div",{style:{width:769,display:"flex",flexDirection:"column"},children:Array.from({length:6}).map((t,m)=>e.jsxs("div",{style:{width:769,display:"flex",flexDirection:"row",padding:"20px 30px",marginBottom:10,boxSizing:"border-box"},children:[e.jsx(n.Button,{active:!0,style:{width:120,height:160,borderRadius:8,marginRight:20}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",textAlign:"left"},children:[e.jsx(n.Button,{active:!0,style:{width:569,height:20,marginTop:20}}),e.jsx(n.Button,{active:!0,style:{width:569,height:20,marginTop:20}}),e.jsx(n.Button,{active:!0,style:{width:100,height:25,marginTop:56}})]})]},m))})}),!o&&c.length===0&&e.jsx(b,{span:24,children:e.jsx(S,{})}),!o&&c.length>0&&c.map(t=>e.jsx("div",{className:s["book-item"],children:e.jsx(K,{cid:t.id,thumb:t.thumb,viewTimes:t.view_times,name:t.name,charge:t.charge,isVipFree:t.is_vip_free,userCount:t.user_count,shortDesc:t.short_desc,publishedAt:t.published_at})},t.id)),!o&&c.length>0&&x<y&&e.jsx(b,{span:24,style:{display:"flex",justifyContent:"center",marginTop:50},children:e.jsx(I,{onChange:t=>{k(t),window.scrollTo(0,0)},pageSize:x,defaultCurrent:f,total:y})})]}),e.jsx("div",{className:s["right-contanier"],children:e.jsxs("div",{className:s["right-list"],children:[e.jsx("div",{className:s.tit,children:"推荐阅读"}),r&&e.jsx(w,{children:e.jsx("div",{style:{width:400,display:"flex",flexDirection:"column"},children:Array.from({length:6}).map((t,m)=>e.jsxs("div",{style:{width:400,display:"flex",flexDirection:"row",marginBottom:30},children:[e.jsx(n.Button,{active:!0,style:{width:90,height:120,borderRadius:8,marginRight:20}}),e.jsx(n,{active:!0,paragraph:{rows:1}})]},m))})}),!r&&d.length===0&&e.jsx(b,{span:24,children:e.jsx(S,{})}),!r&&d.length>0&&e.jsx("div",{className:s["right-box"],children:d.map(t=>e.jsx("div",{className:s["book-item"],children:e.jsxs("div",{className:s["book-item-comp"],onClick:()=>F(t.id),children:[e.jsx("div",{className:s["book-thumb"],children:e.jsx("div",{className:s["thumb-bar"],children:e.jsx(B,{value:t.thumb,width:90,height:120,border:null})})}),e.jsxs("div",{className:s["book-body"],children:[e.jsx("div",{className:s["book-title"],children:t.name}),e.jsxs("div",{className:s["book-charge"],children:[t.charge!==0&&e.jsxs("div",{className:s["charge-text"],children:[e.jsx("span",{className:s.unit,children:"￥"}),t.charge]}),t.charge===0&&e.jsx("div",{className:s["free-text"],children:"免费"})]})]})]})},t.id))})]})})]})]})};export{ee as default};
