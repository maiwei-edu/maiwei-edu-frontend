import{u as g,p as a,v as b,cp as v,s as e,x as N,ao as S,z as l,a0 as C,K as w}from"./index-e91a7de6.js";import{E as y}from"./index-155c943d.js";import{N as z}from"./index-4adf28e8.js";import{P as E}from"./Pagination-ac88559c.js";import"./useForceUpdate-92b38596.js";const T="_box_1uxet_1",s={box:T,"project-box":"_project-box_1uxet_8","btn-title":"_btn-title_1uxet_17","project-content":"_project-content_1uxet_28","project-item":"_project-item_1uxet_33","item-thumb":"_item-thumb_1uxet_42","item-info":"_item-info_1uxet_57","item-top":"_item-top_1uxet_64","item-name":"_item-name_1uxet_72","item-time":"_item-time_1uxet_79","item-bottom":"_item-bottom_1uxet_87","item-price":"_item-price_1uxet_95"},D=()=>{document.title="我的证书",g();const[i,r]=a.useState(!1),[o,d]=a.useState([]),[x,k]=a.useState(!1),[c,_]=a.useState(1),[n,P]=a.useState(10),[m,p]=a.useState(0),u=b(t=>t.systemConfig.value.config);a.useEffect(()=>{j()},[c,n,x]);const j=()=>{i||(r(!0),v({page:c,size:n}).then(t=>{d(t.data.data),p(t.data.total),r(!1)}))},h=t=>{let f=w();window.open(`${u.url}/addons/Cert/api/v1/member/cert/${t.cert.id}/download?token=${f}`)};return e.jsx("div",{className:"container",children:e.jsxs("div",{className:s.box,children:[e.jsx(z,{cid:20,refresh:!0}),e.jsxs("div",{className:s["project-box"],children:[e.jsx("div",{className:s["btn-title"],children:"所有证书"}),e.jsxs("div",{className:s["project-content"],children:[i&&e.jsx(N,{children:e.jsx("div",{className:"float-left d-j-flex mt-50",children:e.jsx(S,{size:"large"})})}),!i&&o.length===0&&e.jsx(l,{span:24,children:e.jsx(y,{})}),!i&&o.length>0&&o.map(t=>e.jsxs("div",{className:s["project-item"],children:[t.cert&&e.jsx("div",{className:s["item-thumb"],children:e.jsx("img",{src:t.cert.template_image})}),e.jsxs("div",{className:s["item-info"],children:[e.jsxs("div",{className:s["item-top"],children:[t.cert&&e.jsx("div",{className:s["item-name"],children:t.cert.name}),e.jsx("div",{className:s["item-time"],children:C(t.created_at)})]}),e.jsx("div",{className:s["item-bottom"],children:e.jsx("div",{className:s["item-price"],onClick:()=>h(t),children:"下载证书"})})]})]},t.id)),!i&&o.length>0&&n<m&&e.jsx(l,{span:24,style:{display:"flex",justifyContent:"center",marginTop:50,marginBottom:30},children:e.jsx(E,{onChange:t=>{_(t),window.scrollTo(0,0)},pageSize:n,defaultCurrent:c,total:m})})]})]})]})})};export{D as default};
