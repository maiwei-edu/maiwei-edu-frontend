import{u as P,p as t,y as R,s,x as T,S,z as j}from"./index-bc9ff81c.js";import{c as V,l as K}from"./course-c30a180a.js";import{E as $}from"./index-5aae9b85.js";import{V as k}from"./index-f10c4a5d.js";import{F as A}from"./index-94285993.js";import{F as B}from"./index-bd4868b8.js";import{P as D}from"./Pagination-0364851f.js";import"./index-c98cdc2b.js";import"./useForceUpdate-4c0917fe.js";const I={"list-box":"_list-box_4noe9_1"},Y=()=>{document.title="录播课";const r=P(),[o,g]=t.useState(!1),[n,h]=t.useState([]),[C,w]=t.useState([]),[p,b]=t.useState(!1),[u,x]=t.useState(1),[c,U]=t.useState(16),[m,v]=t.useState(0),f=new URLSearchParams(R().search),[l,_]=t.useState(f.get("scene")||""),[i,E]=t.useState(Number(f.get("cid"))||0),[d,F]=t.useState(Number(f.get("child"))||0);t.useEffect(()=>{z()},[]),t.useEffect(()=>{N()},[p,u,c]);const y=()=>{x(1),h([]),b(!p)},L=[{id:"",name:"全部"},{id:"free",name:"免费"},{id:"sub",name:"热门"}],z=()=>{V().then(e=>{w(e.data)})},N=()=>{if(o)return;g(!0);let e=0;d===0||i==0?e=i:e=d,K({page:u,page_size:c,scene:l,category_id:e}).then(a=>{h(a.data.data),v(a.data.total),g(!1)})};return s.jsxs(s.Fragment,{children:[s.jsx(B,{loading:o,categories:C,defaultKey:i,defaultChild:d,onSelected:(e,a)=>{E(e),F(a),r(e===0?"/courses?scene="+l:a===0?"/courses?cid="+e+"&scene="+l:"/courses?cid="+e+"&child="+a+"&scene="+l),y()}}),s.jsxs("div",{className:"container",children:[s.jsx(A,{scenes:L,defaultKey:"",onSelected:e=>{_(e),r(i===0?"/courses?scene="+e:"/courses?cid="+i+"&child="+d+"&scene="+e),y()}}),o&&s.jsx(T,{style:{width:1200},children:s.jsx("div",{style:{width:1200,display:"flex",flexWrap:"wrap",justifyContent:"space-between"},children:Array.from({length:12}).map((e,a)=>s.jsxs("div",{style:{width:264,display:"flex",flexDirection:"column"},children:[s.jsx(S.Button,{active:!0,style:{width:264,height:198,borderRadius:"8px 8px 0 0"}}),s.jsx(S,{active:!0,paragraph:{rows:1}})]},a))})}),!o&&n.length===0&&s.jsx(j,{span:24,children:s.jsx($,{})}),!o&&n.length>0&&s.jsx("div",{className:I["list-box"],children:n.map(e=>s.jsx(k,{cid:e.id,videosCount:e.videos_count,thumb:e.thumb,category:e.category,title:e.title,charge:e.charge,isFree:e.is_free,userCount:e.user_count},e.id))}),!o&&n.length>0&&c<m&&s.jsx(j,{span:24,style:{display:"flex",justifyContent:"center",marginTop:50},children:s.jsx(D,{onChange:e=>{x(e),window.scrollTo(0,0)},pageSize:c,defaultCurrent:u,total:m})})]})]})};export{Y as default};
