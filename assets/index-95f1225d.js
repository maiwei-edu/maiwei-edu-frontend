import{ad as D,u as E,p as r,v as g,ch as P,aw as R,aB as M,aC as k,aD as A,s as e,x as B,ao as F,z as v,a0 as L}from"./index-bc9ff81c.js";import{E as U}from"./index-5aae9b85.js";import{N as $}from"./index-58b61523.js";import{P as q}from"./Pagination-0364851f.js";import"./useForceUpdate-4c0917fe.js";const G="_box_59rhe_1",H="_tit_59rhe_30",I="_credit_59rhe_37",J="_rules_59rhe_44",K="_title_59rhe_79",O="_value_59rhe_90",Q="_info_59rhe_99",t={box:G,"right-box":"_right-box_59rhe_8","exchange-box":"_exchange-box_59rhe_14","exchange-content":"_exchange-content_59rhe_23",tit:H,credit:I,rules:J,"project-box":"_project-box_59rhe_50","btn-title":"_btn-title_59rhe_62","project-item":"_project-item_59rhe_70",title:K,value:O,info:Q,"rules-content":"_rules-content_59rhe_108","rules-item":"_rules-item_59rhe_128"},se=()=>{document.title="我的积分";const h=D();E();const[i,x]=r.useState(!1),[d,_]=r.useState([]),[m,p]=r.useState(!1),[o,u]=r.useState(1),[l,V]=r.useState(10),[j,f]=r.useState(0),[c,N]=r.useState(1),b=g(s=>s.loginUser.value.user),a=g(s=>s.systemConfig.value.config),w=[{name:"我的积分",id:1},{name:"明细规则",id:2}];r.useEffect(()=>{c===2&&C(),z(),T()},[o,l,m,c]);const C=()=>{i||(x(!0),P({page:o,page_size:l}).then(s=>{_(s.data.data),f(s.data.total),x(!1)}))},S=()=>{u(1),_([]),p(!m)},y=s=>{N(s),S()},z=()=>{R().then(s=>{let n=s.data;h(M(n))})},T=()=>{k().then(s=>{let n=s.data;h(A(n))})};return e.jsx("div",{className:"container",children:e.jsxs("div",{className:t.box,children:[e.jsx($,{cid:18,refresh:!0}),e.jsxs("div",{className:t["right-box"],children:[e.jsxs("div",{className:t["exchange-box"],children:[e.jsx("div",{className:"member-tabs",children:w.map(s=>e.jsxs("div",{className:c===s.id?"active item-tab":"item-tab",onClick:()=>y(s.id),children:[s.name,c===s.id&&e.jsx("div",{className:"actline"})]},s.id))}),e.jsxs("div",{className:t["exchange-content"],children:[e.jsx("div",{className:t.tit,children:"我的积分："}),e.jsxs("div",{className:t.credit,children:[b.credit1,"积分"]})]})]}),c===2&&e.jsxs("div",{className:t.rules,children:[e.jsxs("div",{className:t["project-box"],children:[e.jsx("div",{className:t["btn-title"],children:"积分明细"}),i&&e.jsx(B,{children:e.jsx("div",{className:"float-left d-j-flex mt-50",children:e.jsx(F,{size:"large"})})}),!i&&d.length===0&&e.jsx(v,{span:24,children:e.jsx(U,{})}),!i&&d.length>0&&e.jsx(e.Fragment,{children:d.map((s,n)=>e.jsxs("div",{className:t["project-item"],children:[e.jsx("div",{className:t.title,children:s.remark}),e.jsx("div",{className:t.value,children:s.sum>0?e.jsxs("span",{children:["+",s.sum]}):e.jsx("span",{children:s.sum})}),e.jsx("div",{className:t.info,children:e.jsx("span",{children:L(s.created_at)})})]},n))}),!i&&d.length>0&&l<j&&e.jsx(v,{span:24,style:{display:"flex",justifyContent:"center",marginTop:50,marginBottom:30},children:e.jsx(q,{onChange:s=>{u(s),window.scrollTo(0,0)},pageSize:l,defaultCurrent:o,total:j})})]}),e.jsxs("div",{className:t["rules-content"],children:[e.jsx("div",{className:t["btn-title"],children:"积分获取"}),a.credit1_reward.register!==0&&e.jsx("div",{className:t["rules-item"],children:e.jsxs("p",{children:["• 注册登录 +",a.credit1_reward.register," 积分"]})}),a.credit1_reward.watched_video!==0&&e.jsx("div",{className:t["rules-item"],children:e.jsxs("p",{children:["• 看完视频 +",a.credit1_reward.watched_video," 积分"]})}),a.credit1_reward.watched_vod_course!==0&&e.jsx("div",{className:t["rules-item"],children:e.jsxs("p",{children:["• 看完课程 +",a.credit1_reward.watched_vod_course," ","积分"]})}),a.credit1_reward.paid_order!==0&&e.jsx("div",{className:t["rules-item"],children:e.jsxs("p",{children:["• 下单成功 +实付金额*",Math.floor(Number(a.credit1_reward.paid_order)*100),"% 积分"]})}),a.credit1_reward.invite!==0&&e.jsx("div",{className:t["rules-item"],children:e.jsxs("p",{children:["• 邀请好友注册 +",a.credit1_reward.invite," 积分"]})}),e.jsx("div",{className:t["rules-item"],children:e.jsx("p",{children:"• 可以回答积分悬赏问题获取积分"})})]})]})]})]})})};export{se as default};
