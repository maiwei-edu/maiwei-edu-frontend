import{q as y,p as a,s as e,ah as se,I as E,t as m,v as te,aG as r,S as h,D as ae,z,a0 as ie}from"./index-c511a629.js";import{E as H}from"./index-38c52fdf.js";import{S as ne,P as F}from"./Pagination-e6b85467.js";import"./useForceUpdate-771f503b.js";function oe(){return y.get("/addons/MultiLevelShare/api/v1/config",{})}function le(){return y.get("/addons/MultiLevelShare/api/v1/user",{})}function ce(n){return y.get("/addons/MultiLevelShare/api/v1/user/goods",n)}function de(n){return y.get("/addons/MultiLevelShare/api/v1/user/balanceRecords",n)}function re(n){return y.post("/addons/MultiLevelShare/api/v1/user/withdraw",n)}const ue="_box_1jy0s_1",_e="_user_1jy0s_8",me="_avatar_1jy0s_26",he="_input_1jy0s_60",xe="_value_1jy0s_99",je="_tit_1jy0s_110",ve="_line_1jy0s_163",pe="_desc_1jy0s_169",ge="_btns_1jy0s_192",be="_baseline_1jy0s_212",fe="_reward_1jy0s_298",ye="_title_1jy0s_334",Ne="_price_1jy0s_342",Se="_info_1jy0s_141",we="_page_1jy0s_1",t={box:ue,"user-box":"_user-box_1jy0s_8",user:_e,avatar:me,"user-info":"_user-info_1jy0s_38","user-name":"_user-name_1jy0s_44","share-box":"_share-box_1jy0s_54",input:he,"btn-copy":"_btn-copy_1jy0s_75","item-box":"_item-box_1jy0s_93",value:xe,tit:je,"withdraw-button":"_withdraw-button_1jy0s_118","bottom-box":"_bottom-box_1jy0s_135","info-box":"_info-box_1jy0s_141",line:ve,desc:pe,"project-box":"_project-box_1jy0s_183",btns:ge,"active-btn-title":"_active-btn-title_1jy0s_199",baseline:be,"btn-title":"_btn-title_1jy0s_220","goods-box":"_goods-box_1jy0s_236","goods-item":"_goods-item_1jy0s_243","goods-thumb":"_goods-thumb_1jy0s_252","goods-info":"_goods-info_1jy0s_268","goods-title":"_goods-title_1jy0s_277","goods-charge":"_goods-charge_1jy0s_290",reward:fe,"poster-button":"_poster-button_1jy0s_305","project-item":"_project-item_1jy0s_321",title:ye,price:Ne,info:Se,page:we},Ce="_mask_qw46d_17",ke="_scaleBig_qw46d_1",Be="_rotate360_qw46d_1",qe="_info_qw46d_70",Te="_item_qw46d_62",ze="_tit_qw46d_89",Ee="_input_qw46d_101",o={mask:Ce,"dialog-box":"_dialog-box_qw46d_31",scaleBig:ke,"dialog-tabs":"_dialog-tabs_qw46d_41","btn-close":"_btn-close_qw46d_50",rotate360:Be,"item-tab":"_item-tab_qw46d_62",info:qe,item:Te,tit:ze,input:Ee,"btn-box":"_btn-box_qw46d_114","btn-cancel":"_btn-cancel_qw46d_126","btn-submit":"_btn-submit_qw46d_143"},Le=({open:n,balance:x,onSuccess:d,onCancel:N})=>{const[L,j]=a.useState(!1),[v,g]=a.useState(""),[b,S]=a.useState(""),[_,w]=a.useState(0),[l,C]=a.useState("alipay"),[A,P]=a.useState(""),p=[{label:"支付宝",value:"alipay"}];a.useEffect(()=>{n&&(S(""),g(""),w(0),C("alipay"),P(""))},[n]);const f=()=>{if(!L){if(b===""){m.error("请输入支付宝账户");return}if(v===""){m.error("请输入真实姓名");return}if(!_){m.error("请输入提现金额");return}if(_>x){m.error("提现金额不得大于余额");return}if(_<=0){m.error("提现金额需要大于0");return}j(!0),re({channel_account:b,channel_name:v,amount:_,channel:l,channel_address:A}).then(()=>{m.success("提现申请已提交，请耐心等待管理员转账"),d(),j(!1)})}};return e.jsx(e.Fragment,{children:n&&e.jsx("div",{className:o.mask,children:e.jsxs("div",{className:o["dialog-box"],children:[e.jsxs("div",{className:o["dialog-tabs"],children:[e.jsx("div",{className:o["item-tab"],children:"申请提现"}),e.jsx("img",{className:o["btn-close"],onClick:()=>N(),src:se})]}),e.jsxs("div",{className:o.info,children:[e.jsxs("div",{className:o.item,children:[e.jsxs("div",{className:o.tit,children:[e.jsx("span",{children:"*"}),"提现渠道"]}),e.jsx(ne,{size:"large",allowClear:!0,style:{flex:1,height:40,borderRadius:4,borderColor:"#dcdfe6",outline:"none",fontSize:14,color:"#333333",textAlign:"left"},value:l,onChange:u=>{C(u)},placeholder:"请选择",options:p})]}),l==="alipay"?e.jsxs("div",{className:o.item,children:[e.jsxs("div",{className:o.tit,children:[e.jsx("span",{children:"*"}),"提现账号"]}),e.jsx(E,{value:b,onChange:u=>{S(u.target.value)},className:o.input,placeholder:"收款账号"})]}):null,e.jsxs("div",{className:o.item,children:[e.jsxs("div",{className:o.tit,children:[e.jsx("span",{children:"*"}),"真实姓名"]}),e.jsx(E,{value:v,onChange:u=>{g(u.target.value)},className:o.input,placeholder:"真实姓名"})]}),e.jsxs("div",{className:o.item,children:[e.jsxs("div",{className:o.tit,children:[e.jsx("span",{children:"*"}),"提现金额"]}),e.jsx(E,{type:"number",value:_,onChange:u=>{w(u.target.value)},className:o.input,placeholder:"提现金额",min:0})]})]}),e.jsxs("div",{className:o["btn-box"],children:[e.jsx("div",{className:o["btn-submit"],onClick:()=>f(),children:"申请提现"}),e.jsx("div",{className:o["btn-cancel"],onClick:()=>N(),children:"取消"})]})]})})})},Ge=()=>{document.title="推广";const[n,x]=a.useState(!1),[d,N]=a.useState(!0),[L,j]=a.useState(!1),[v,g]=a.useState(""),[b,S]=a.useState(0),[_,w]=a.useState(0),[l,C]=a.useState(1),[A,P]=a.useState(""),[p,f]=a.useState([]),[u,I]=a.useState(1),[k,Ae]=a.useState(10),[D,W]=a.useState(0),[J,Pe]=a.useState(!1),[B,M]=a.useState([]),[R,K]=a.useState(1),[q,Re]=a.useState(9),[$,O]=a.useState(0),[Q,Ie]=a.useState(!1),c=te(s=>s.loginUser.value.user),V=[{name:"分销课程",id:1},{name:"资金明细",id:2}];a.useEffect(()=>{f([]),l===2&&G()},[J,u,k,l]),a.useEffect(()=>{M([]),l===1&&X()},[Q,R,q,l]),a.useEffect(()=>{U(),Y()},[c]);const U=()=>{le().then(s=>{S(s.data.invite_count),w(s.data.invite_balance);let i=r()+"?msv="+c.id;g(i),N(!1)})},G=()=>{n||(x(!0),de({page:u,size:k}).then(s=>{f(s.data.data),W(s.data.total),x(!1)}))},X=()=>{n||(x(!0),ce({page:R,size:q}).then(s=>{M(s.data.data.data),O(s.data.data.total),x(!1)}))},Y=()=>{oe().then(s=>{P(s.data.rules)})},Z=()=>{var s=document.createElement("input");s.value=v,document.body.appendChild(s),s.select(),document.execCommand("Copy"),document.body.removeChild(s),m.success("复制成功")},ee=s=>{let i;s.goods_type==="practice"?i=r()+"exam/practice/detail/"+s.goods_id+"?msv="+c.id:s.goods_type==="paper"?i=r()+"exam/papers/detail/"+s.goods_id+"?msv="+c.id:s.goods_type==="topic"?i=r()+"topic/detail/"+s.goods_id+"?msv="+c.id:s.goods_type==="learnPath"?i=r()+"learnPath/detail/"+s.goods_id+"?msv="+c.id:s.goods_type==="book"?i=r()+"book/detail/"+s.goods_id+"?msv="+c.id:s.goods_type==="live"?i=r()+"live/detail/"+s.goods_id+"?msv="+c.id:s.goods_type==="video"?i=r()+"courses/video/"+s.goods_id+"?msv="+c.id:s.goods_type==="vip"?i=r()+"vip?msv="+c.id:s.goods_type==="ms"?i=r()+"ms/detail?id="+s.goods_id+"&msv="+c.id:s.goods_type==="tg"?i=r()+"tg/detail?id="+s.goods_id+"&msv="+c.id:i=r()+"courses/detail/"+s.goods_id+"?msv="+c.id;var T=document.createElement("input");T.value=i,document.body.appendChild(T),T.select(),document.execCommand("Copy"),document.body.removeChild(T),m.success("复制成功")};return e.jsxs("div",{className:"container",children:[e.jsx(Le,{open:L,balance:_,onCancel:()=>j(!1),onSuccess:()=>{U(),f(""),I(1),G(),j(!1)}}),e.jsxs("div",{className:t.box,children:[c&&e.jsxs("div",{className:t["user-box"],children:[e.jsxs("div",{className:t.user,children:[e.jsx("div",{className:t.avatar,children:e.jsx("img",{src:c.avatar})}),e.jsxs("div",{className:t["user-info"],children:[e.jsx("div",{className:t["user-name"],children:c.nick_name}),d&&e.jsx(h.Button,{active:!0,style:{width:344,height:34}}),!d&&e.jsxs("div",{className:t["share-box"],children:[e.jsx(E,{value:v,onChange:s=>{g(s.target.value)},className:t.input}),e.jsx(ae,{className:t["btn-copy"],onClick:()=>Z(),children:"复制您的专属邀请链接"})]})]})]}),e.jsxs("div",{className:t["item-box"],children:[d&&e.jsx(h.Button,{active:!0,style:{width:56,height:32,marginTop:5,marginBottom:30}}),!d&&e.jsx("div",{className:t.value,children:b}),e.jsx("div",{className:t.tit,children:"邀请人数"})]}),e.jsxs("div",{className:t["item-box"],children:[d&&e.jsx(h.Button,{active:!0,style:{width:56,height:32,marginTop:5,marginBottom:30}}),!d&&e.jsx("div",{className:t.value,children:e.jsx("span",{children:_})}),e.jsx("div",{className:t.tit,children:"邀请余额"})]}),d&&e.jsx(h.Button,{active:!0,style:{width:104,height:48,marginTop:19,borderRadius:4}}),!d&&e.jsx("div",{className:t["withdraw-button"],onClick:()=>{if(_===0){m.error("余额为0时不可提现");return}j(!0)},children:"提现"})]}),e.jsxs("div",{className:t["bottom-box"],children:[e.jsxs("div",{className:t["project-box"],children:[e.jsx("div",{className:t.btns,children:V.map(s=>e.jsxs("div",{className:l===s.id?t["active-btn-title"]:t["btn-title"],onClick:()=>{n||C(s.id)},children:[s.name,l===s.id&&e.jsx("div",{className:t.baseline})]},s.id))}),n&&l===1&&e.jsx("div",{className:t["goods-box"],children:Array.from({length:3}).map((s,i)=>e.jsx(h.Button,{active:!0,style:{width:216,height:248,borderRadius:8}},i))}),n&&l===2&&e.jsx("div",{style:{width:710,display:"flex",flexDirection:"column"},children:Array.from({length:3}).map((s,i)=>e.jsx(h.Button,{active:!0,style:{width:710,height:14,marginTop:20}},i))}),!n&&l===1&&B.length===0&&e.jsx(z,{span:24,children:e.jsx(H,{})}),!n&&l===1&&B.length>0&&e.jsx("div",{className:t["goods-box"],children:B.map(s=>e.jsxs("div",{className:t["goods-item"],children:[e.jsx("div",{className:t["goods-thumb"],children:e.jsx("img",{src:s.goods_thumb})}),e.jsxs("div",{className:t["goods-info"],children:[e.jsx("div",{className:t["goods-title"],children:s.goods_title}),e.jsxs("div",{className:t["goods-charge"],children:[e.jsxs("div",{className:t.reward,children:["邀新用户下单可赚",s.reward,"元"]}),e.jsx("div",{className:t["poster-button"],onClick:()=>ee(s),children:"复制链接"})]})]})]},s.id))}),!n&&B.length>0&&l===1&&q<$&&e.jsx(z,{span:24,style:{display:"flex",justifyContent:"center",marginTop:50},children:e.jsx(F,{onChange:s=>{K(s),window.scrollTo(0,0)},pageSize:q,defaultCurrent:R,total:$})}),!n&&l===2&&p.length===0&&e.jsx(z,{span:24,children:e.jsx(H,{})}),!n&&l===2&&p.length>0&&p.map((s,i)=>e.jsxs("div",{className:t["project-item"],children:[e.jsx("div",{className:t.title,children:s.remark}),e.jsxs("div",{className:t.price,children:[s.amount,"元"]}),e.jsx("div",{className:t.info,children:e.jsx("span",{children:ie(s.created_at)})})]},i)),!n&&p.length>0&&l===2&&k<D&&e.jsx(z,{span:24,style:{display:"flex",justifyContent:"center",marginTop:50},children:e.jsx(F,{onChange:s=>{I(s),window.scrollTo(0,0)},pageSize:k,defaultCurrent:u,total:D})})]}),e.jsxs("div",{className:t["info-box"],children:[e.jsx("div",{className:t.tit,children:"分销课程说明"}),e.jsx("div",{className:t.line}),d&&e.jsx("div",{style:{width:340,display:"flex",flexDirection:"column"},children:Array.from({length:3}).map((s,i)=>e.jsx(h.Button,{active:!0,style:{width:340,height:14,marginTop:8,marginBottom:8}},i))}),!d&&e.jsx("div",{className:t.desc,dangerouslySetInnerHTML:{__html:A}})]})]})]})]})};export{Ge as default};
