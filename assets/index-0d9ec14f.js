import{u as B,y as E,p as s,G as S,H as w,Z as L,$ as b,s as e,x as _,S as i,a0 as g}from"./index-c511a629.js";const I="_content_1l5g9_1",R="_contanier_1l5g9_4",D="_notice_1l5g9_22",k="_title_1l5g9_28",A="_stat_1l5g9_39",H="_line_1l5g9_55",P="_tit_1l5g9_28",t={content:I,contanier:R,"announcement-box":"_announcement-box_1l5g9_13",notice:D,title:k,stat:A,"div-times":"_div-times_1l5g9_45",line:H,"announcement-list":"_announcement-list_1l5g9_61",tit:P,"act-announcement-item":"_act-announcement-item_1l5g9_84","item-title":"_item-title_1l5g9_88","item-info":"_item-info_1l5g9_101","item-time":"_item-time_1l5g9_109","announcement-item":"_announcement-item_1l5g9_116"},C=()=>{const h=B(),c=new URLSearchParams(E().search),[l,d]=s.useState(!1),[o,m]=s.useState(!1),[a,x]=s.useState({}),[r,v]=s.useState([]),[u,j]=s.useState(Number(c.get("id")));s.useEffect(()=>{j(Number(c.get("id")))},[c.get("id")]),s.useEffect(()=>{S(document.getElementById("desc")),w(document.getElementById("desc"))},[document.getElementById("desc")]),s.useEffect(()=>{f()},[u]),s.useEffect(()=>{N()},[]);const f=()=>{l||(d(!0),L(u).then(n=>{document.title="公告："+n.data.title,x(n.data),d(!1)}))},N=()=>{o||(m(!0),b().then(n=>{v(n.data.data),m(!1)}))},y=n=>{h("/announcement?id="+n,{replace:!0})};return e.jsx("div",{className:t.content,children:e.jsxs("div",{className:t.contanier,children:[e.jsxs("div",{className:t["announcement-box"],children:[l&&e.jsx(_,{children:e.jsxs("div",{className:t.notice,children:[e.jsx(i.Button,{active:!0,style:{width:806,height:18,marginBottom:30}}),e.jsx(i.Button,{active:!0,style:{width:200,height:14}}),e.jsx("div",{className:t.line}),e.jsx(i,{active:!0,paragraph:{rows:1}})]})}),!l&&e.jsxs("div",{className:t.notice,children:[e.jsx("div",{className:t.title,children:a.title}),e.jsx("div",{className:t.stat,children:e.jsx("span",{className:t["div-times"],children:g(a.created_at)})}),e.jsx("div",{className:t.line}),e.jsx("div",{className:"u-content md-content",id:"desc",dangerouslySetInnerHTML:{__html:a.announcement}})]})]}),e.jsxs("div",{className:t["announcement-list"],children:[e.jsx("div",{className:t.tit,children:"历史公告"}),o&&e.jsx(_,{children:Array.from({length:5}).map((n,p)=>e.jsxs("div",{style:{width:264,display:"flex",flexDirection:"column"},children:[e.jsx(i.Button,{active:!0,style:{width:200,height:24,marginBottom:10}}),e.jsx(i.Button,{active:!0,style:{width:200,height:12,marginBottom:30}})]},p))}),!o&&r.length>0&&r.map(n=>e.jsxs("div",{className:n.id===a.id?t["act-announcement-item"]:t["announcement-item"],onClick:()=>y(n.id),children:[e.jsx("div",{className:t["item-title"],children:n.title}),e.jsx("div",{className:t["item-info"],children:e.jsx("div",{className:t["item-time"],children:g(n.created_at)})})]},n.id))]})]})})};export{C as default};
