import{u as L,s as t,ct as o,p as s,y as $,x as S,S as c,z as _}from"./index-c511a629.js";import{l as H,h as V}from"./topic-532c0a37.js";import{E as C}from"./index-38c52fdf.js";import{T as R}from"./index-fd5c4c39.js";import{F as A}from"./index-12a58c4e.js";import{P as I}from"./Pagination-e6b85467.js";import"./useForceUpdate-771f503b.js";const K=({cid:r,title:a,thumb:d,charge:l,category:h,viewTimes:n,isVipFree:u,isNeedLogin:f,voteCount:v,commentCount:g})=>{const x=L(),m=()=>{x("/topic/detail/"+r)};return t.jsxs("div",{className:o["topic-item-comp"],onClick:()=>m(),children:[t.jsx("div",{className:o["topic-thumb"],children:t.jsx("div",{className:o["thumb-bar"],children:t.jsx(R,{value:d,width:133,height:100,border:null})})}),t.jsxs("div",{className:o["topic-body"],children:[t.jsx("div",{className:o["topic-title"],children:a}),t.jsxs("div",{className:o["topic-info"],children:[t.jsx("div",{className:o.category,children:h}),t.jsxs("span",{className:o["read-count"],children:[n,"次阅读"]})]})]})]})},U="_container_ojgn5_1",q="_tit_ojgn5_34",G="_category_ojgn5_96",i={container:U,"left-contanier":"_left-contanier_ojgn5_10","right-contanier":"_right-contanier_ojgn5_18","right-list":"_right-list_ojgn5_22",tit:q,"right-box":"_right-box_ojgn5_44","topic-item":"_topic-item_ojgn5_49","topic-item-comp":"_topic-item-comp_ojgn5_56","topic-thumb":"_topic-thumb_ojgn5_66","thumb-bar":"_thumb-bar_ojgn5_66","topic-body":"_topic-body_ojgn5_69","topic-title":"_topic-title_ojgn5_74","topic-info":"_topic-info_ojgn5_88",category:G,"read-count":"_read-count_ojgn5_106"},tt=()=>{document.title="图文";const r=L(),[a,d]=s.useState(!1),[l,h]=s.useState(!1),[n,u]=s.useState([]),[f,v]=s.useState([]),[g,x]=s.useState([]),[m,D]=s.useState(!1),[j,y]=s.useState(1),[p,J]=s.useState(10),[b,T]=s.useState(0),B=new URLSearchParams($().search),[N,z]=s.useState(Number(B.get("category_id"))||0);s.useEffect(()=>{F()},[m,j,p]),s.useEffect(()=>{P()},[]);const E=()=>{y(1),u([]),D(!m)},F=()=>{a||(d(!0),H({page:j,size:p,scene:"default",cid:N}).then(e=>{u(e.data.data.data),T(e.data.data.total),v(e.data.categories),d(!1)}))},P=()=>{l||(h(!0),V().then(e=>{x(e.data),h(!1)}))},k=e=>{r("/topic/detail/"+e)};return t.jsxs(t.Fragment,{children:[t.jsx(A,{loading:a,categories:f,defaultKey:N,defaultChild:0,onSelected:(e,w)=>{z(e),r(e===0?"/topic":"/topic?category_id="+e),E()}}),t.jsxs("div",{className:i.container,children:[t.jsxs("div",{className:i["left-contanier"],children:[a&&t.jsx(S,{children:t.jsx("div",{style:{width:769,display:"flex",flexDirection:"column"},children:Array.from({length:6}).map((e,w)=>t.jsxs("div",{style:{width:769,display:"flex",flexDirection:"row",padding:"20px 30px",boxSizing:"border-box",marginBottom:10},children:[t.jsx(c.Button,{active:!0,style:{width:133,height:100,borderRadius:8,marginRight:20}}),t.jsx(c,{active:!0,paragraph:{rows:1}})]},w))})}),!a&&n.length===0&&t.jsx(_,{span:24,children:t.jsx(C,{})}),!a&&n.length>0&&n.map(e=>t.jsx(K,{cid:e.id,thumb:e.thumb,viewTimes:e.view_times,category:e.category.name,title:e.title,charge:e.charge,isVipFree:e.is_vip_free,isNeedLogin:e.is_need_login,voteCount:e.vote_count,commentCount:e.comment_times},e.id)),!a&&n.length>0&&p<b&&t.jsx(_,{span:24,style:{display:"flex",justifyContent:"center",marginTop:50},children:t.jsx(I,{onChange:e=>{y(e),window.scrollTo(0,0)},pageSize:p,defaultCurrent:j,total:b})})]}),t.jsx("div",{className:i["right-contanier"],children:t.jsxs("div",{className:i["right-list"],children:[t.jsx("div",{className:i.tit,children:"推荐阅读"}),l&&t.jsx(S,{children:t.jsxs("div",{style:{width:400,display:"flex",flexDirection:"column"},children:[t.jsxs("div",{style:{width:400,display:"flex",flexDirection:"row",marginBottom:30,boxSizing:"border-box"},children:[t.jsx(c.Button,{active:!0,style:{width:133,height:100,borderRadius:8,marginRight:20}}),t.jsx(c,{active:!0,paragraph:{rows:1}})]}),t.jsxs("div",{style:{width:400,display:"flex",flexDirection:"row",marginBottom:30},children:[t.jsx(c.Button,{active:!0,style:{width:133,height:100,borderRadius:8,marginRight:20}}),t.jsx(c,{active:!0,paragraph:{rows:1}})]})]})}),!l&&g.length===0&&t.jsx(_,{span:24,children:t.jsx(C,{})}),!l&&g.length>0&&t.jsx("div",{className:i["right-box"],children:g.map(e=>t.jsx("div",{className:i["topic-item"],children:t.jsxs("div",{className:i["topic-item-comp"],onClick:()=>k(e.id),children:[t.jsx("div",{className:i["topic-thumb"],children:t.jsx("div",{className:i["thumb-bar"],children:t.jsx(R,{value:e.thumb,width:133,height:100,border:null})})}),t.jsxs("div",{className:i["topic-body"],children:[t.jsx("div",{className:i["topic-title"],children:e.title}),t.jsxs("div",{className:i["topic-info"],children:[t.jsx("div",{className:i.category,children:e.category.name}),t.jsxs("span",{className:i["read-count"],children:[e.view_times,"次阅读"]})]})]})]})},e.id))})]})})]})]})};export{tt as default};
