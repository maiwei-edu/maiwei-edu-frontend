import{u as P,F as U,p as s,v as D,s as e,S as l,t as c}from"./index-bc9ff81c.js";import{d as F}from"./practice-426591a5.js";import{E as J}from"./index-5aae9b85.js";const Q="_title_1f0xf_10",A="_info_1f0xf_21",O="_records_1f0xf_100",r={"banner-box":"_banner-box_1f0xf_1",title:Q,info:A,"info-item":"_info-item_1f0xf_29","btn-box":"_btn-box_1f0xf_43","join-button":"_join-button_1f0xf_49","charge-button":"_charge-button_1f0xf_65","vip-button":"_vip-button_1f0xf_82","records-box":"_records-box_1f0xf_100",records:O,"record-item":"_record-item_1f0xf_111","item-name":"_item-name_1f0xf_131","item-progress":"_item-progress_1f0xf_139"},W=()=>{const a=P(),u=U(),[i,m]=s.useState(!1),[n,v]=s.useState({}),[f,T]=s.useState([]),[x,N]=s.useState([]),[d,y]=s.useState(!1),[p,S]=s.useState(null),[j,C]=s.useState([]),[b,z]=s.useState(99999),[G,w]=s.useState(0),[I,H]=s.useState(!1),[o,E]=s.useState(Number(u.courseId)||0),h=D(t=>t.loginUser.value.isLogin);s.useEffect(()=>{L()},[o]),s.useEffect(()=>{E(Number(u.courseId))},[u.courseId]),s.useEffect(()=>{let t=0;for(var g in f)t=t+f[g].length;w(t)},[f]);const L=()=>{i||(m(!0),F(o).then(t=>{document.title=t.data.practice.name,v(t.data.practice),N(t.data.chapters),y(t.data.can),S(t.data.practice_user_record),C(t.data.user_chapter_records),m(!1)}).catch(t=>{m(!1)}))},R=t=>typeof j[t.id]>"u"?0:j[t.id].submit_count,k=()=>{if(!h){_();return}if(d===!1){c.error("无权限参与");return}if(n.question_count===0){c.error("当前练习为空");return}a("/exam/practice/play?day=1&practiceId="+o)},B=t=>{if(!h){_();return}if(!I){if(t.question_count===0){c.error("无试题");return}if(d===!1){c.error("无权限参与");return}a("/exam/practice/play?practiceId="+o+"&chapterId="+t.id)}},_=()=>{let t=encodeURIComponent(window.location.pathname+window.location.search);a("/login?redirect="+t)},q=()=>{if(!h){_();return}if(n.charge===0){c.error("当前练习无法购买");return}a("/order?goods_id="+o+"&goods_type=practice&goods_charge="+n.charge+"&goods_label=练习&goods_name="+n.name)};return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"bread-nav",children:[e.jsx("a",{onClick:()=>{a("/exam")},children:"考试练习"})," ","/",e.jsx("a",{onClick:()=>{a("/exam/practice")},children:"练习模式"})," ","/",e.jsx("span",{children:n.name})]}),e.jsxs("div",{className:r["banner-box"],children:[i&&e.jsxs("div",{style:{width:1200,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(l.Button,{active:!0,style:{width:300,height:28,marginTop:50,marginBottom:30}}),e.jsx(l.Button,{active:!0,style:{width:600,height:14,marginBottom:50}}),e.jsx(l.Button,{active:!0,style:{width:104,height:40,borderRadius:4}})]}),!i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:r.title,children:n.name}),e.jsx("div",{className:r.info,children:e.jsxs("div",{className:r["info-item"],children:["已练习：",p?p.submit_count:0,"/",n.question_count||0]})}),e.jsx("div",{className:r["btn-box"],children:e.jsxs(e.Fragment,{children:[!d&&n.charge>0&&e.jsxs("div",{className:r["charge-button"],onClick:()=>q(),children:["购买练习 ￥",n.charge]}),d&&b&&b!==0&&e.jsx("div",{className:r["join-button"],onClick:()=>k(),children:"每日20题"})]})})]})]}),e.jsx("div",{className:r["records-box"],children:e.jsxs("div",{className:r.records,children:[i&&e.jsx("div",{style:{width:1200,display:"flex",flexDirection:"column",alignItems:"center"},children:Array.from({length:3}).map((t,g)=>e.jsx("div",{className:r["record-item"],children:e.jsx(l.Button,{active:!0,style:{width:1140,height:16}})},g))}),!i&&x.length===0&&e.jsx(J,{}),!i&&x.length>0&&e.jsx(e.Fragment,{children:x.map(t=>e.jsxs("div",{className:r["record-item"],onClick:()=>B(t),children:[e.jsx("div",{className:r["item-name"],children:t.name}),e.jsx("div",{className:r["item-progress"],children:e.jsxs("span",{children:["已练习",R(t),"/",t.question_count]})})]},t.id))})]})})]})};export{W as default};
